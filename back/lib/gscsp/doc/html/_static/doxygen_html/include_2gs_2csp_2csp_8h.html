<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>ProductInterfaceApplication: lib/libgscsp/include/gs/csp/csp.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ProductInterfaceApplication
   &#160;<span id="projectnumber">2.7.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_97aefd0d527b934f1d99a682da8fe6a9.html">lib</a></li><li class="navelem"><a class="el" href="dir_303066d96aaab45b5e0544acce1f3eb9.html">libgscsp</a></li><li class="navelem"><a class="el" href="dir_a181e1839aa12970da5aa6006f7c55d8.html">include</a></li><li class="navelem"><a class="el" href="dir_30da9659bede92ccbc130ddef6540be0.html">gs</a></li><li class="navelem"><a class="el" href="dir_a633dd8e051879d0d4ce03be73853a0d.html">csp</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">csp.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Extensions to standard libcsp. </p>
</div><div class="textblock"><code>#include &lt;<a class="el" href="libgscsp_2include_2gs_2csp_2error_8h_source.html">gs/csp/error.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="port_8h_source.html">gs/csp/port.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="rtable_8h_source.html">gs/csp/rtable.h</a>&gt;</code><br />
<code>#include &lt;csp/csp.h&gt;</code><br />
</div>
<p><a href="include_2gs_2csp_2csp_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgs__csp__conf__t.html">gs_csp_conf_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">gscsp and csp configuration.  <a href="structgs__csp__conf__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ac2615f8b2744fd47665ae8674bc64b9a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#ac2615f8b2744fd47665ae8674bc64b9a">GS_CSP_TIMEOUT</a>&#160;&#160;&#160;3000</td></tr>
<tr class="memdesc:ac2615f8b2744fd47665ae8674bc64b9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default CSP timeout (mS).  <a href="#ac2615f8b2744fd47665ae8674bc64b9a">More...</a><br /></td></tr>
<tr class="separator:ac2615f8b2744fd47665ae8674bc64b9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19872e4107429efbc6167eb9b8b849a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#a19872e4107429efbc6167eb9b8b849a2">GS_CSP_DEFAULT_MAX_PAYLOAD_SIZE</a>&#160;&#160;&#160;198</td></tr>
<tr class="memdesc:a19872e4107429efbc6167eb9b8b849a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default maximum payload size per CSP packet.  <a href="#a19872e4107429efbc6167eb9b8b849a2">More...</a><br /></td></tr>
<tr class="separator:a19872e4107429efbc6167eb9b8b849a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acb3521fb980054bc7bfe5e0c1db16548"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#acb3521fb980054bc7bfe5e0c1db16548">gs_csp_is_address_valid</a> (uint8_t address)</td></tr>
<tr class="memdesc:acb3521fb980054bc7bfe5e0c1db16548"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if address is a valid CSP adddress.  <a href="#acb3521fb980054bc7bfe5e0c1db16548">More...</a><br /></td></tr>
<tr class="separator:acb3521fb980054bc7bfe5e0c1db16548"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe61bb498beee64ef0083d8d2fdb15f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#afe61bb498beee64ef0083d8d2fdb15f6">gs_csp_conf_get_defaults_server</a> (<a class="el" href="structgs__csp__conf__t.html">gs_csp_conf_t</a> *conf)</td></tr>
<tr class="memdesc:afe61bb498beee64ef0083d8d2fdb15f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get default CSP configuration for server systems.  <a href="#afe61bb498beee64ef0083d8d2fdb15f6">More...</a><br /></td></tr>
<tr class="separator:afe61bb498beee64ef0083d8d2fdb15f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33fd229bdc033d16e91ee23b4c480af2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#a33fd229bdc033d16e91ee23b4c480af2">gs_csp_conf_get_defaults_embedded</a> (<a class="el" href="structgs__csp__conf__t.html">gs_csp_conf_t</a> *conf)</td></tr>
<tr class="memdesc:a33fd229bdc033d16e91ee23b4c480af2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get default CSP configuration for embedded systems.  <a href="#a33fd229bdc033d16e91ee23b4c480af2">More...</a><br /></td></tr>
<tr class="separator:a33fd229bdc033d16e91ee23b4c480af2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16672f21a52e6cd758f8c38f2697f203"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#a16672f21a52e6cd758f8c38f2697f203">gs_csp_init</a> (const <a class="el" href="structgs__csp__conf__t.html">gs_csp_conf_t</a> *conf)</td></tr>
<tr class="memdesc:a16672f21a52e6cd758f8c38f2697f203"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize CSP.  <a href="#a16672f21a52e6cd758f8c38f2697f203">More...</a><br /></td></tr>
<tr class="separator:a16672f21a52e6cd758f8c38f2697f203"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcb2b789caef4e838461700f333a21c9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#afcb2b789caef4e838461700f333a21c9">gs_csp_free_resources</a> (void)</td></tr>
<tr class="memdesc:afcb2b789caef4e838461700f333a21c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free allocated resorces in GSCSP and CSP (for testing).  <a href="#afcb2b789caef4e838461700f333a21c9">More...</a><br /></td></tr>
<tr class="separator:afcb2b789caef4e838461700f333a21c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adca1659d1a06cfaf61e30c0421be9e84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#adca1659d1a06cfaf61e30c0421be9e84">gs_csp_transaction2</a> (uint8_t prio, uint8_t dest, uint8_t port, uint32_t timeout, const void *tx_buf, size_t tx_len, void *rx_buf, size_t rx_max_len, size_t *rx_len, uint32_t opts)</td></tr>
<tr class="memdesc:adca1659d1a06cfaf61e30c0421be9e84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an entire request/reply transaction,.  <a href="#adca1659d1a06cfaf61e30c0421be9e84">More...</a><br /></td></tr>
<tr class="separator:adca1659d1a06cfaf61e30c0421be9e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74fe6ab4952caf27c2318b1da12db70b"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#a74fe6ab4952caf27c2318b1da12db70b">gs_csp_transaction</a> (uint8_t prio, uint8_t dest, uint8_t port, uint32_t timeout, const void *tx_buf, size_t tx_len, void *rx_buf, size_t rx_max_len, size_t *rx_len)</td></tr>
<tr class="memdesc:a74fe6ab4952caf27c2318b1da12db70b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an entire request/reply transaction,.  <a href="#a74fe6ab4952caf27c2318b1da12db70b">More...</a><br /></td></tr>
<tr class="separator:a74fe6ab4952caf27c2318b1da12db70b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab25f4d86c95392ffd0ea2581e20c31c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#ab25f4d86c95392ffd0ea2581e20c31c1">gs_csp_transaction_persistent</a> (<a class="el" href="csp__types_8h.html#a62973dd7ae8c8df11e8affa2f40a5760">csp_conn_t</a> *conn, uint32_t timeout, const void *tx_buf, size_t tx_len, void *rx_buf, size_t rx_max_len, size_t *rx_len)</td></tr>
<tr class="memdesc:ab25f4d86c95392ffd0ea2581e20c31c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use an existing connection to perform a transaction.  <a href="#ab25f4d86c95392ffd0ea2581e20c31c1">More...</a><br /></td></tr>
<tr class="separator:ab25f4d86c95392ffd0ea2581e20c31c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6527576822af9b16bb61e223b5eb4ed2"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#a6527576822af9b16bb61e223b5eb4ed2">csp_get_hostname</a> (void)</td></tr>
<tr class="memdesc:a6527576822af9b16bb61e223b5eb4ed2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get host name.  <a href="#a6527576822af9b16bb61e223b5eb4ed2">More...</a><br /></td></tr>
<tr class="separator:a6527576822af9b16bb61e223b5eb4ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa8a0a6d3eb485105855d7dae98d4a2f1"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#aa8a0a6d3eb485105855d7dae98d4a2f1">csp_get_model</a> (void)</td></tr>
<tr class="memdesc:aa8a0a6d3eb485105855d7dae98d4a2f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get model name.  <a href="#aa8a0a6d3eb485105855d7dae98d4a2f1">More...</a><br /></td></tr>
<tr class="separator:aa8a0a6d3eb485105855d7dae98d4a2f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfa693964eae5fee64f8b0dcf9328404"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#acfa693964eae5fee64f8b0dcf9328404">csp_get_revision</a> (void)</td></tr>
<tr class="memdesc:acfa693964eae5fee64f8b0dcf9328404"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get revision.  <a href="#acfa693964eae5fee64f8b0dcf9328404">More...</a><br /></td></tr>
<tr class="separator:acfa693964eae5fee64f8b0dcf9328404"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f740e270a3738cfb2036a444cfdcd72"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="include_2gs_2csp_2csp_8h.html#a9f740e270a3738cfb2036a444cfdcd72">csp_transaction2</a> (uint8_t prio, uint8_t dest, uint8_t port, uint32_t timeout, void *outbuf, int outlen, void *inbuf, int inlen, uint32_t opts)</td></tr>
<tr class="memdesc:a9f740e270a3738cfb2036a444cfdcd72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Perform an entire request/reply transaction Copies both input buffer and reply to output buffeer.  <a href="#a9f740e270a3738cfb2036a444cfdcd72">More...</a><br /></td></tr>
<tr class="separator:a9f740e270a3738cfb2036a444cfdcd72"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a class="anchor" id="a19872e4107429efbc6167eb9b8b849a2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GS_CSP_DEFAULT_MAX_PAYLOAD_SIZE&#160;&#160;&#160;198</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default maximum payload size per CSP packet. </p>
<p>Any application/service sending CSP packets with maximum payload, should base their maximum payload size on this define. Using this define as reference, will allow the maximum size to be adjusted by only changing this define. The define must never be used as a fixed size between end-points, as it may be changed in future releases.</p>
<p>The maximum CSP packet size that can be sent between two end-points, depends on what options are enabled in the node (client) and any relay points on the way, e.g. the radio (AX100).</p>
<p>Ax100: The total CSP packet size, which an AX100 can transmit, is 251 bytes (excluding the mandatory CSP header). The AX100 supports a number of options, which reduces the total size:</p>
<ul>
<li>Reed-Solomon error correction: 32 bytes</li>
<li>CRC32: 4 bytes</li>
<li>HMAC: 4 bytes</li>
</ul>
<p>Client: When the client opens a CSP connection, it is possible to enable a number of options. Some of these options may add additional bytes to the packet, hence reducing the maximum payload size:</p>
<ul>
<li>CRC32: 4 bytes</li>
<li>HMAC: 4 bytes (this is ignored, since HMAC in most cases are either enabled in radio or client - not both).</li>
<li>XTEA: 4 bytes</li>
<li>RDP: 5 bytes</li>
</ul>
<p>The maximum payload size is therefor calculated as: max = (251 - 32 - 4 - 4) - (4 - 4 - 5) = 198 bytes </p>

</div>
</div>
<a class="anchor" id="ac2615f8b2744fd47665ae8674bc64b9a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GS_CSP_TIMEOUT&#160;&#160;&#160;3000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default CSP timeout (mS). </p>
<p>Default timeout value for communicating with a satellite, based on round-trip time of approximately 500 mS. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a6527576822af9b16bb61e223b5eb4ed2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* csp_get_hostname </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get host name. </p>
<dl class="section note"><dt>Note</dt><dd>Legacy CSP function. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>host name. </dd></dl>

</div>
</div>
<a class="anchor" id="aa8a0a6d3eb485105855d7dae98d4a2f1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* csp_get_model </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get model name. </p>
<dl class="section note"><dt>Note</dt><dd>Legacy CSP function. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>model name </dd></dl>

</div>
</div>
<a class="anchor" id="acfa693964eae5fee64f8b0dcf9328404"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* csp_get_revision </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get revision. </p>
<dl class="section note"><dt>Note</dt><dd>Legacy CSP function. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>revision. </dd></dl>

</div>
</div>
<a class="anchor" id="a9f740e270a3738cfb2036a444cfdcd72"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int csp_transaction2 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>outbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>outlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>inbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>inlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform an entire request/reply transaction Copies both input buffer and reply to output buffeer. </p>
<p>Also makes the connection and closes it again</p>
<dl class="deprecated"><dt><b><a class="el" href="deprecated.html#_deprecated000033">Deprecated:</a></b></dt><dd>Use <a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a119e44617dec5de38514b5a8e2fbd6d6" title="Perform an entire request &amp; reply transaction. ">csp_transaction_w_opts()</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">prio</td><td>CSP Prio </td></tr>
    <tr><td class="paramname">dest</td><td>CSP Dest </td></tr>
    <tr><td class="paramname">port</td><td>CSP Port </td></tr>
    <tr><td class="paramname">timeout</td><td>timeout in ms </td></tr>
    <tr><td class="paramname">outbuf</td><td>pointer to outgoing data buffer </td></tr>
    <tr><td class="paramname">outlen</td><td>length of request to send </td></tr>
    <tr><td class="paramname">inbuf</td><td>pointer to incoming data buffer </td></tr>
    <tr><td class="paramname">inlen</td><td>length of expected reply, -1 for unknown size (note inbuf MUST be large enough) </td></tr>
    <tr><td class="paramname">opts</td><td>Connection options. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Return 1 or reply size if successful, 0 if error or incoming length does not match or -1 if timeout was reached </dd></dl>

</div>
</div>
<a class="anchor" id="a33fd229bdc033d16e91ee23b4c480af2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gs_csp_conf_get_defaults_embedded </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgs__csp__conf__t.html">gs_csp_conf_t</a> *&#160;</td>
          <td class="paramname"><em>conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get default CSP configuration for embedded systems. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>user supplied configuration struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afe61bb498beee64ef0083d8d2fdb15f6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gs_csp_conf_get_defaults_server </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structgs__csp__conf__t.html">gs_csp_conf_t</a> *&#160;</td>
          <td class="paramname"><em>conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get default CSP configuration for server systems. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>user supplied configuration struct. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afcb2b789caef4e838461700f333a21c9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void gs_csp_free_resources </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free allocated resorces in GSCSP and CSP (for testing). </p>
<p>This is only to be called from automatic tests, to satisfy tools like valgrind. </p>

</div>
</div>
<a class="anchor" id="a16672f21a52e6cd758f8c38f2697f203"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a> gs_csp_init </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structgs__csp__conf__t.html">gs_csp_conf_t</a> *&#160;</td>
          <td class="paramname"><em>conf</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize CSP. </p>
<p>Wraps initialization of libcsp, by calling following functions</p><ul>
<li>hooks CSP log system into GomSpace log system.</li>
<li>initializes CSP buffers by calling csp_buffer_init()</li>
<li>initializes CSP by calling <a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a2b8035bc90806bf63f127ca04e132a06" title="Initialize CSP. ">csp_init()</a></li>
<li>configure interfaces specificed on command line</li>
<li>configure routing table specificed on command line, or default if only one interface is present.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conf</td><td>configuration. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>GS_OK on success </dd>
<dd>
other error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="acb3521fb980054bc7bfe5e0c1db16548"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool gs_csp_is_address_valid </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if address is a valid CSP adddress. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>CSP address to verify </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>true</em> if address is valid. </dd></dl>

</div>
</div>
<a class="anchor" id="a74fe6ab4952caf27c2318b1da12db70b"></a>
<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a> gs_csp_transaction </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>tx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_max_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>rx_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Perform an entire request/reply transaction,. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prio</td><td>CSP Prio </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>CSP Dest </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>CSP Port </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>timeout in ms </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_buf</td><td>pointer to outgoing data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_len</td><td>length of request to send </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rx_buf</td><td>pointer to incoming data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_max_len</td><td>length of expected reply (input buffer size) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rx_len</td><td>pointer to length of reply </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>GS_ERROR_OVERFLOW when input length larger than buffer - it still updates rx_buf </dd>
<dd>
GS_ERROR_IO when '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a85ad94fed8a4bfd94bd275746382ba77" title="Send packet on a connection. ">csp_send()</a>' or '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a0d35d1eb241ed3de57060af4882bb9e1" title="Read packet from a connection. ">csp_read()</a>' fails </dd>
<dd>
GS_ERROR_ALLOC when 'csp_get_buffer()' fails </dd>
<dd>
GS_OK on success </dd>
<dd>
other error code on failure </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="include_2gs_2csp_2csp_8h.html#adca1659d1a06cfaf61e30c0421be9e84" title="Perform an entire request/reply transaction,. ">gs_csp_transaction2()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="adca1659d1a06cfaf61e30c0421be9e84"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a> gs_csp_transaction2 </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>prio</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>tx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_max_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>rx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>opts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Perform an entire request/reply transaction,. </p>
<p>Copies both input buffer and reply to output buffer. Also makes the connection and closes it again Differ from '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a8e6dd301f7ccbeb87197071a2edb741b" title="Perform an entire request &amp; reply transaction. ">csp_transaction()</a>' by limiting input buffer size when input length is unknown</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">prio</td><td>CSP Prio </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dest</td><td>CSP Dest </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">port</td><td>CSP Port </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>timeout in ms </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_buf</td><td>pointer to outgoing data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_len</td><td>length of request to send </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rx_buf</td><td>pointer to incoming data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_max_len</td><td>length of expected reply (input buffer size) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rx_len</td><td>pointer to length of reply </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">opts</td><td>connection options. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>GS_ERROR_OVERFLOW when input length larger than buffer - it still updates rx_buf </dd>
<dd>
GS_ERROR_IO when '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a85ad94fed8a4bfd94bd275746382ba77" title="Send packet on a connection. ">csp_send()</a>' or '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a0d35d1eb241ed3de57060af4882bb9e1" title="Read packet from a connection. ">csp_read()</a>' fails </dd>
<dd>
GS_ERROR_ALLOC when 'csp_get_buffer()' fails </dd>
<dd>
GS_OK on success </dd>
<dd>
other error code on failure </dd></dl>

</div>
</div>
<a class="anchor" id="ab25f4d86c95392ffd0ea2581e20c31c1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="libutil_2include_2gs_2util_2error_8h.html#a91aea7d2bf231aa2a13f95a6c5305cbc">gs_error_t</a> gs_csp_transaction_persistent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="csp__types_8h.html#a62973dd7ae8c8df11e8affa2f40a5760">csp_conn_t</a> *&#160;</td>
          <td class="paramname"><em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>tx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>tx_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>rx_buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>rx_max_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>rx_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Use an existing connection to perform a transaction. </p>
<p>This is only possible if the next packet is on the same port and destination! Differ from '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a0995717954d19508099fbce1887256ae" title="Perform an entire request &amp; reply transaction on an existing connection. ">csp_transaction_persistent()</a>' by limiting input buffer size when input length is unknown</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">conn</td><td>pointer to connection structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout</td><td>timeout in ms </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_buf</td><td>pointer to outgoing data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">tx_len</td><td>length of request to send </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rx_buf</td><td>pointer to incoming data buffer </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">rx_max_len</td><td>length of expected reply (input buffer size) </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rx_len</td><td>pointer to length of reply </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>GS_ERROR_OVERFLOW when input length larger than buffer - it still updates rx_buf </dd>
<dd>
GS_ERROR_IO when '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a85ad94fed8a4bfd94bd275746382ba77" title="Send packet on a connection. ">csp_send()</a>' or '<a class="el" href="lib_2libcsp_2include_2csp_2csp_8h.html#a0d35d1eb241ed3de57060af4882bb9e1" title="Read packet from a connection. ">csp_read()</a>' fails </dd>
<dd>
GS_ERROR_ALLOC when 'csp_get_buffer()' fails </dd>
<dd>
GS_OK on success </dd>
<dd>
other error code on failure </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
    <table width="100%" border="0">
      <tr>
	<td>Copyright &copy; 2013-2020 GomSpace A/S. All rights reserved. </td>
	<td><right>Generated by Doxygen 1.8.11</right></td>
      </tr>
    </table>
</small></address>
</body>
</html>
